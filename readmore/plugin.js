CKEDITOR.plugins.add( 'readmore', { init: function( e ) {	 e.addCommand( 'insertReadMore', { exec : function( e ) { var d=e.document.getElementsByTag('img'); var is = true; for(var i=0,c=d.count();i'); //el = e.document.createElement("img"); //el.setAttribute("style", 'height: 10px; width: 99.9%; clear: both; border: none; border-top:1px dotted #999999'); var d=e.createFakeElement(new CKEDITOR.dom.comment('more'),'ck_editor_read_more', 'img'), ee=e.getSelection().getRanges()[0], f=new CKEDITOR.dom.elementPath(ee.getCommonAncestor(true)), g=f.block&&f.block.getParent()||f.blockLimit, h; while(g&&g.getName()!='body'){ ee.moveToPosition(g,4);h=1;g=g.getParent(); } if(!h)ee.splitBlock('p'); //e.insertElement(d); ee.insertNode(d); var i=d; while((i=i.getNext())&&!ee.moveToElementEditStart(i)){} } } } );